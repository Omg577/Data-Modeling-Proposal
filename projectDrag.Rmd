---
title: "projectData"
author: "Noah Serrault"
date: "2025-11-21"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(dplyr)
library(broom)    # for tidy() / glance() output (optional but nice)
library(ggplot2)

df <- read.csv("student.csv", sep = ";")

df <- df %>%
  transmute(
    G3,
    failures,
    has_failure = as.integer(failures > 0),  # 0 = none, 1 = ≥1
    pass_math   = as.integer(G3 >= 10)       # 0 = fail, 1 = pass
  )

summary(df$G3)
table(df$has_failure)
table(df$pass_math)

# Method 1: Compare two population means (Welch two-sample t-test)
# has failures vs no failures
means_by_group <- df %>%
  group_by(has_failure) %>%
  summarise(n = n(), mean_G3 = mean(G3), sd_G3 = sd(G3), .groups = "drop")
print(means_by_group)

t_out <- t.test(G3 ~ has_failure, data = df, var.equal = FALSE, conf.level = 0.95)
print(t_out)
```
mean no past failures is 11.25 vs 7.2 and is statistically significant



```{r}
tab <- with(df, table(has_failure, pass_math))
print(tab)

# Order groups as: 0 failures, then ≥1 failure
x <- c(tab["0","1"], tab["1","1"])                 
n <- c(sum(tab["0",]),  sum(tab["1",]))         
phat <- x / n
data.frame(group = c("no failure", ">=1 failure"), n, successes = x, phat)

prop_out <- prop.test(x = x, n = n, correct = FALSE, conf.level = 0.95)
print(prop_out)
```
prop out .75 vs .37




```{r, echo=FALSE}
# Graph 1: Boxplot
ggplot(df, aes(x = factor(has_failure, levels = c(0,1), labels = c("No Failures","Prior Failures")),
               y = G3)) +
  geom_boxplot(fill = "lightblue") +
  labs(
    title = "Final Grade (G3) by Prior Failures",
    x = "Status",
    y = "Final Grade (G3)"
  ) +
  theme_minimal()

# Graph 2: Jitter + Regression
ggplot(df, aes(x = failures, y = G3)) +
  geom_jitter(width = 0.1, height = 0, alpha = 0.7) +
  geom_smooth(method = "lm", se = TRUE, color = "red") +
  labs(
    title = "Relationship Between Number of Failures and Final Grade",
    x = "Number of Prior Failures",
    y = "Final Grade (G3)"
  ) +
  theme_minimal()

# Graph 3: Bar Chart of Proportions
sum2 <- df %>%
  group_by(has_failure) %>%
  summarise(
    n = n(),
    pass_rate = mean(pass_math),
    .groups = "drop"
  )

ggplot(sum2, aes(x = factor(has_failure, levels = c(0,1), labels = c("No Failures","Prior Failures")),
                 y = pass_rate)) +
  geom_col(fill = "steelblue") +
  scale_y_continuous(labels = scales::percent, limits = c(0, 1)) +
  labs(
    title = "Proportion Passing (G3 ≥ 10) by Prior Failures",
    x = "Status",
    y = "Proportion Passing"
  ) +
  theme_minimal()
```





